<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Modern JavaScript Mastery - Learn JS properly from basics to advanced concepts">
  <title>Modern JavaScript Mastery</title>
  <style>
    /* (Previous CSS remains unchanged) */
    :root {
  --bg: #0f1724;
  --panel: #0c1424;
  --card: #0b1220;
  --ink: #e6eef8;
  --muted: #9fb1c9;
  --accent: #60a5fa;
  --good: #34d399;
  --warn: #fbbf24;
  --bad: #fb7185;
  --glass: rgba(255, 255, 255, 0.06)
}

* {
  box-sizing: border-box
}

body {
  font-family: Inter, ui-sans-serif, system-ui, Segoe UI, Arial;
  margin: 0;
  background: linear-gradient(180deg, #071029 0%, #0b1220 100%);
  color: var(--ink)
}

header {
  padding: 28px 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06)
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 16px
}

h1 {
  font-size: 28px;
  margin: 0 0 6px
}

p.lead {
  color: var(--muted);
  margin: 0
}

.toolbar {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 14px
}

.btn {
  background: transparent;
  border: 1px solid var(--glass);
  padding: 8px 12px;
  border-radius: 10px;
  color: var(--accent);
  cursor: pointer
}

.btn:hover {
  background: var(--glass)
}

.layout {
  display: grid;
  grid-template-columns: 340px 1fr;
  gap: 18px;
  padding: 18px
}

aside {
  background: var(--panel);
  border: 1px solid var(--glass);
  border-radius: 14px;
  padding: 12px;
  height: 78vh;
  overflow: auto
}

main {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.02));
  border: 1px solid var(--glass);
  border-radius: 14px;
  padding: 18px;
  height: 78vh;
  overflow: auto
}

.chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border: 1px solid var(--glass);
  border-radius: 999px;
  color: var(--muted);
  cursor: pointer
}

.chip.active {
  color: var(--ink);
  background: rgba(96, 165, 250, 0.12);
  border-color: rgba(96, 165, 250, 0.35)
}

.search {
  width: 100%;
  padding: 10px;
  border-radius: 10px;
  border: 1px solid var(--glass);
  background: transparent;
  color: inherit;
  margin-bottom: 10px
}

.chapters {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 12px
}

.list {
  list-style: none;
  margin: 0;
  padding: 0
}

.list li {
  padding: 8px;
  border-radius: 10px;
  cursor: pointer;
  color: var(--muted)
}

.list li:hover {
  background: rgba(255, 255, 255, 0.04);
  color: var(--ink)
}

.list li.active {
  background: rgba(96, 165, 250, 0.12);
  color: var(--ink)
}

.lesson h2 {
  margin: 0
}

.prof {
  font-style: italic;
  color: #c7e0ff;
  margin-top: 4px
}

.pill {
  font-size: 12px;
  padding: 4px 8px;
  border: 1px solid var(--glass);
  border-radius: 999px;
  color: var(--muted)
}

.grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px
}

.card {
  background: var(--card);
  border: 1px solid var(--glass);
  border-radius: 14px;
  padding: 12px
}

pre,
code {
  font-family: ui-monospace, SFMono-Regular, Consolas, Monaco, monospace
}

pre {
  margin: 0;
  background: rgba(0, 0, 0, 0.35);
  padding: 12px;
  border-radius: 10px;
  overflow: auto
}

.tasks li {
  margin: 6px 0
}

.ok {
  color: var(--good)
}

.warn {
  color: var(--warn)
}

.bad {
  color: var(--bad)
}

.nav {
  display: flex;
  gap: 10px;
  justify-content: space-between
}

.nav .btn {
  flex: 1
}

footer {
  padding: 16px;
  color: var(--muted);
  text-align: center
}

/* Print/PDF */
@media print {
  body {
    background: white;
    color: black
  }

  header,
  aside,
  .toolbar {
    display: none
  }

  main {
    height: auto
  }

  .card {
    page-break-inside: avoid
  }
}

/* === Responsive Adjustments === */

/* On tablets and smaller (<= 1024px) — adjust layout proportions */
@media (max-width: 1024px) {
  .layout {
    grid-template-columns: 280px 1fr;
    gap: 12px;
  }

  aside {
    height: 70vh;
  }

  main {
    height: 70vh;
  }
}

/* On phones and small screens (<= 767px) — stack sidebar and content vertically */
@media (max-width: 767px) {
  .layout {
    display: flex;
    flex-direction: column;
    padding: 12px;
  }

  aside {
    width: 100%;
    height: auto;
    margin-bottom: 12px;
    max-height: 40vh;
  }

  main {
    width: 100%;
    height: auto;
    max-height: 60vh;
  }

  header,
  .toolbar {
    padding: 20px 12px;
  }

  .container {
    padding: 0 12px;
  }
}

/* On very narrow phones (<= 480px) — make buttons and text more tap-friendly */
@media (max-width: 480px) {
  .btn {
    padding: 10px 14px;
    font-size: 0.9rem;
  }

  .search {
    padding: 8px;
    font-size: 0.9rem;
  }

  .pill {
    font-size: 11px;
    padding: 3px 6px;
  }
  }
  </style>
</head>
<body>
  <!-- (Previous HTML structure remains unchanged) -->
<header>
‎    <div class="container">
‎      <h1>JavaScript Mastery for Young Minds — Full Tutorial</h1>
‎      <p class="lead">A professor’s 75 years of wisdom, explained kindly for a 13‑year‑old. Follow the guided path or jump to any topic.</p>
‎      <div class="toolbar">
‎        <button class="btn" id="startPath">▶ Start Guided Path</button>
‎        <button class="btn" id="printPdf">🖨️ Print / Save as PDF</button>
‎        <button class="btn" id="downloadHtml">⬇️ Download .html</button>
‎        <span class="pill" id="progressPill">Progress: 0 / 250</span>
‎      </div>
‎    </div>
‎  </header>
‎
‎  <div class="container layout">
‎    <aside>
‎      <input id="search" class="search" placeholder="Search topics (press Enter)…" />
‎      <div class="chapters">
‎        <span class="chip active" data-chapter="Beginner">Beginner</span>
‎        <span class="chip" data-chapter="Intermediate">Intermediate</span>
‎        <span class="chip" data-chapter="Advanced">Advanced</span>
‎      </div>
‎      <ol id="topicList" class="list"></ol>
‎    </aside>
‎
‎    <main>
‎      <article class="lesson">
‎        <h2 id="lessonHeading">Welcome, young learner</h2>
‎        <div class="prof">Professor — patient, curious, and practical.</div>
‎        <div class="grid" id="lessonGrid">
‎          <section class="card">
‎            <h3>How this tutorial works</h3>
‎            <p>Each lesson has five parts: <b>Concept</b> → <b>Step‑by‑step</b> → <b>Example</b> → <b>Practice</b> → <b>Quick quiz</b>. Finish a lesson and mark it as done to track progress.</p>
‎            <ul>
‎              <li>Use the left panel to filter by <b>Beginner / Intermediate / Advanced</b>.</li>
‎              <li>Click <b>Start Guided Path</b> to follow a smart order with milestone mini‑projects.</li>
‎              <li>Click <b>Print / Save as PDF</b> to get a printable version.</li>
‎            </ul>
‎          </section>
‎        </div>
‎        <div class="nav">
‎          <button class="btn" id="prev">⬅️ Previous</button>
‎          <button class="btn" id="markDone">✅ Mark as Done</button>
‎          <button class="btn" id="next">Next ➡️</button>
‎        </div>
‎      </article>
‎    </main>
‎  </div>
‎
‎  <footer>
‎    <small>This is a self‑contained tutorial. No frameworks. You can study offline — just save the page.</small>
‎  </footer>
‎
  <script>
    // ===== Revised Data: Properly organized topics =====
    const Beginner = [
      "JavaScript Fundamentals",
      "Variables: let, const (no var)",
      "Data Types: Primitives vs Objects",
      "Type Conversion & Coercion",
      "Operators: Arithmetic, Comparison, Logical",
      "Template Literals",
      "null vs undefined",
      "typeof and instanceof",
      "Functions: Declaration vs Expression",
      "Arrow Functions: Syntax and this",
      "Function Parameters & Arguments",
      "Default Parameters",
      "Rest Parameters",
      "Scope: Global, Function, Block",
      "Conditionals: if, else, switch",
      "Truthy and Falsy Values",
      "Loops: for, while, do-while",
      "break and continue",
      "Arrays: Creation and Basic Methods",
      "Array Iteration: for, for-of, forEach",
      "Objects: Literal Syntax",
      "Object Properties: Access and Modification",
      "Object Methods",
      "JSON: stringify and parse",
      "Error Handling: try/catch"
    ];

    const Intermediate = [
      "Strict Mode",
      "Equality: == vs ===, Object.is",
      "nullish coalescing (??)",
      "Optional chaining (?.)",
      "Ternary Operator",
      "Short-circuit Evaluation",
      "Array Methods: map, filter, reduce",
      "Array Methods: some, every, find",
      "Array Methods: sort, reverse",
      "Array Methods: slice, splice",
      "String Methods",
      "Spread Operator (...)",
      "Destructuring: Arrays and Objects",
      "Object.assign vs Spread",
      "Shallow vs Deep Copy",
      "Date and Time",
      "DOM Selection Methods",
      "DOM Manipulation",
      "Event Handling",
      "Event Delegation",
      "Event Object",
      "Timers: setTimeout, setInterval",
      "CSS Manipulation with JS",
      "localStorage and sessionStorage",
      "Form Handling",
      "Basic Async Concepts"
    ];

    const Advanced = [
      "Closures",
      "IIFE Pattern",
      "Higher-order Functions",
      "Function Composition",
      "Recursion",
      "this Binding Rules",
      "call, apply, bind",
      "Prototypal Inheritance",
      "ES6 Classes",
      "Class Inheritance",
      "Static Methods",
      "Private Class Fields",
      "Symbols",
      "Iterators and Iterables",
      "Generators",
      "Promises",
      "async/await",
      "Error Handling in Async Code",
      "Fetch API",
      "AbortController",
      "Web Workers",
      "Service Workers",
      "WebSockets",
      "Canvas API",
      "Proxy and Reflect",
      "Modules: import/export",
      "Dynamic Imports",
      "Performance Optimization"
    ];

    const ALL = [...Beginner, ...Intermediate, ...Advanced];

    // ===== Deep Lessons with Accurate Content =====
    const deep = {
      "Variables: let, const (no var)": {
        concept: "Modern JavaScript uses block-scoped let and const instead of function-scoped var.",
        steps: [
          "Use const by default - for values that won't be reassigned",
          "Use let when you need to reassign a variable",
          "Never use var - it has confusing function-scoping and hoisting behavior",
          "Variables declared with let/const have temporal dead zone (TDZ)"
        ],
        example: `// Good:
const PI = 3.14;
let counter = 0;

// Bad:
var oldVariable; // Don't use var`,
        practice: [
          "Create a const for your name and a let for your age",
          "Try to reassign a const and observe the error"
        ],
        quiz: [
          {
            q: "What happens if you access a let variable before declaration?",
            a: ["undefined", "ReferenceError", "null"],
            correct: 1
          },
          {
            q: "Which should you use by default?",
            a: ["let", "const", "var"],
            correct: 1
          }
        ],
        mistakes: [
          "Using var out of habit",
          "Reassigning const variables",
          "Not utilizing block scope properly"
        ]
      },
      
      "Arrow Functions: Syntax and this": {
        concept: "Arrow functions provide concise syntax and lexically bind this value.",
        steps: [
          "Syntax: (params) => expression",
          "For single parameter, parentheses are optional",
          "For single expression, return is implicit",
          "No own this - inherits from surrounding scope",
          "Cannot be used as constructors",
          "No arguments object"
        ],
        example: `// Traditional function
function add(a, b) { return a + b; }

// Arrow equivalent
const add = (a, b) => a + b;

// 'this' behavior
const obj = {
  name: 'Alice',
  traditional: function() { console.log(this.name) }, // 'Alice'
  arrow: () => console.log(this.name) // undefined (inherits window)
};`,
        practice: [
          "Convert traditional functions to arrow functions",
          "Create an object with methods using both syntaxes"
        ],
        quiz: [
          {
            q: "When should you NOT use arrow functions?",
            a: ["As object methods", "For array methods", "In setTimeout"],
            correct: 0
          },
          {
            q: "What does arrow function inherit from parent scope?",
            a: ["variables", "this", "both"],
            correct: 2
          }
        ],
        mistakes: [
          "Using arrow functions as object methods",
          "Using arrow functions as constructors",
          "Overusing arrow syntax when clarity suffers"
        ]
      },

      "Promises": {
        concept: "Promises represent eventual completion (or failure) of async operations.",
        steps: [
          "States: pending, fulfilled, rejected",
          "Create with new Promise((resolve, reject) => {...})",
          "Chain with .then() for success, .catch() for errors",
          "Use Promise.all() for multiple parallel promises",
          "Use Promise.race() for first completed promise",
          "Always handle errors with .catch()"
        ],
        example: `function fetchData(url) {
  return new Promise((resolve, reject) => {
    fetch(url)
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => resolve(data))
      .catch(error => reject(error));
  });
}

// Usage
fetchData('https://api.example.com/data')
  .then(data => console.log(data))
  .catch(error => console.error('Error:', error));`,
        practice: [
          "Create a promise that resolves after a delay",
          "Chain multiple promises together"
        ],
        quiz: [
          {
            q: "What's the final state of a promise?",
            a: ["Pending", "Fulfilled or Rejected", "Settled"],
            correct: 1
          },
          {
            q: "How to handle multiple promises in parallel?",
            a: ["Promise.all", "Promise.race", "Promise.chain"],
            correct: 0
          }
        ],
        mistakes: [
          "Not returning promises in chain",
          "Forgetting error handling",
          "Nesting promises instead of chaining"
        ]
      },

      "async/await": {
        concept: "async/await provides syntactic sugar for working with promises.",
        steps: [
          "Mark function with async keyword",
          "Use await to pause execution until promise settles",
          "try/catch blocks for error handling",
          "Async functions always return a promise",
          "Can use await with any thenable"
        ],
        example: `async function getUserData(userId) {
  try {
    const response = await fetch(`https://api.example.com/users/${userId}`);
    if (!response.ok) {
      throw new Error('User not found');
    }
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('Failed to fetch user:', error);
    throw error; // Re-throw for caller
  }
}

// Usage
(async () => {
  try {
    const user = await getUserData(123);
    console.log('User:', user);
  } catch (error) {
    // Handle error
  }
})();`,
        practice: [
          "Convert promise-based code to async/await",
          "Handle errors properly in async functions"
        ],
        quiz: [
          {
            q: "What does async function always return?",
            a: ["undefined", "Promise", "The awaited value"],
            correct: 1
          },
          {
            q: "What happens if you forget await?",
            a: ["Syntax error", "Get promise instead of value", "Nothing"],
            correct: 1
          }
        ],
        mistakes: [
          "Forgetting await keyword",
          "Not handling errors properly",
          "Using await in non-async functions"
        ]
      },

      "Modules: import/export": {
        concept: "ES Modules provide a standardized way to organize code into reusable modules.",
        steps: [
          "Use export to expose functionality",
          "Use import to use functionality from other modules",
          "Named exports vs default exports",
          "Use type='module' in script tags",
          "Modules have their own scope"
        ],
        example: `// math.js
export const PI = 3.14159;

export function sum(a, b) {
  return a + b;
}

export default function multiply(a, b) {
  return a * b;
}

// app.js
import multiply, { PI, sum } from './math.js';

console.log(PI); // 3.14159
console.log(sum(2, 3)); // 5
console.log(multiply(2, 3)); // 6`,
        practice: [
          "Create a module with utility functions",
          "Import and use the module in another file"
        ],
        quiz: [
          {
            q: "How to import a default export?",
            a: ["import { name }", "import name", "import * as name"],
            correct: 1
          },
          {
            q: "What scope do modules have?",
            a: ["Global", "Module", "Function"],
            correct: 1
          }
        ],
        mistakes: [
          "Mixing named and default imports incorrectly",
          "Forgetting type='module'",
          "Circular dependencies"
        ]
      }
    };

    // ===== Improved Template for Other Topics =====
    function templateFor(topic) {
      const level = Beginner.includes(topic) ? 'Beginner' : 
                   Intermediate.includes(topic) ? 'Intermediate' : 'Advanced';
      
      return {
        concept: `This topic covers ${topic}, an important ${level.toLowerCase()} JavaScript concept.`,
        steps: [
          `Understand the core concept of ${topic}`,
          `See practical examples of ${topic} in use`,
          `Learn common patterns and best practices`,
          `Identify and avoid common mistakes`
        ],
        example: `// Example of ${topic}
// Replace with actual implementation
function example() {
  console.log('Implement ${topic} properly');
}`,
        practice: [
          `Create a simple example using ${topic}`,
          `Identify where ${topic} would be useful in real code`
        ],
        quiz: [
          {
            q: `What is the primary purpose of ${topic}?`,
            a: ["Syntax sugar", "Solve specific problem", "Both"],
            correct: 1
          }
        ],
        mistakes: [
          "Not understanding underlying concepts",
          "Using in inappropriate situations",
          "Performance pitfalls"
        ]
      };
    }

    // ===== Rest of JavaScript Code (Remains Similar) =====
    // (Keep the existing implementation for rendering, navigation, etc.)
    // But ensure all functions are properly scoped and modernized

    // Initialize the app
    document.addEventListener('DOMContentLoaded', () => {
      renderList();
      openLesson(0);
    });
  </script>
</body>
    </html>
